# 견적서 관리 시스템 구현 계획

## 개요
관리자가 견적서를 생성, 조회, 수정, 삭제할 수 있는 웹 기반 시스템

## 현재 상황
- Next.js 15 + TypeScript 기반 프로젝트
- Neon Postgres DB 사용 중 (quotes 테이블 존재)
- 기존 관리자 페이지 `/admin` 존재 (견적 요청 관리)
- 정적 HTML 견적서 파일들이 `/public/quotes/`에 저장됨

## 구현 방안

### 1. 데이터베이스 설계
새로운 `quote_documents` 테이블 생성:
```sql
CREATE TABLE quote_documents (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title VARCHAR(255) NOT NULL,           -- 견적서 제목 (예: 미쓰비시엘리베이터 기업홈페이지)
  client_name VARCHAR(255),              -- 수신처 (예: 담당자님)
  project_name VARCHAR(255),             -- 프로젝트명
  doc_number VARCHAR(100),               -- 문서번호
  valid_days INTEGER DEFAULT 30,         -- 유효기간 (일)
  total_amount INTEGER,                  -- 총 금액
  items JSONB,                           -- 견적 항목들 (배열)
  payment_terms JSONB,                   -- 결제 조건
  notes TEXT,                            -- 기타 사항
  status VARCHAR(50) DEFAULT 'draft',    -- draft, sent, accepted, rejected
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### 2. 페이지 구조
```
/admin/quotes              - 견적서 목록 (기존 admin 페이지에 탭 추가)
/admin/quotes/new          - 새 견적서 작성
/admin/quotes/[id]         - 견적서 상세보기/미리보기
/admin/quotes/[id]/edit    - 견적서 수정
```

### 3. API 엔드포인트
```
GET    /api/admin/quote-documents        - 견적서 목록 조회
POST   /api/admin/quote-documents        - 견적서 생성
GET    /api/admin/quote-documents/[id]   - 견적서 상세 조회
PUT    /api/admin/quote-documents/[id]   - 견적서 수정
DELETE /api/admin/quote-documents/[id]   - 견적서 삭제
GET    /api/quote-documents/[id]/html    - HTML 렌더링 (PDF 저장용)
```

### 4. 주요 기능
1. **목록 페이지**: 모든 견적서 테이블 형태로 표시, 검색/필터 기능
2. **생성/수정 폼**:
   - 기본 정보 (제목, 수신처, 프로젝트명, 문서번호)
   - 견적 항목 동적 추가/삭제 (카테고리, 항목명, 세부내용, 금액)
   - 결제 조건 설정
   - 기타 사항 입력
3. **미리보기**: 기존 HTML 템플릿 스타일로 렌더링
4. **PDF 저장**: 브라우저 인쇄 기능 활용

### 5. 구현 순서
1. DB 테이블 생성 (마이그레이션)
2. API 엔드포인트 구현
3. 견적서 목록 페이지 (admin 탭 추가)
4. 견적서 생성 폼
5. 견적서 상세보기/미리보기
6. 견적서 수정 기능
7. 견적서 삭제 기능

### 6. UI/UX
- 기존 admin 페이지 스타일 유지 (다크 테마, green 포인트 컬러)
- framer-motion 애니메이션 적용
- 반응형 디자인
